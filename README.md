# visitor_pattern
방문자 패턴

**1.개요**

 - 방문자 패턴은 로직을 객체 구조에서 분리 시키는 디자인 패턴이다.
 - 비슷한 종류의 객체들을 가진 그룹에서 작업을 수행해야 할 때 주로 사용되는 패턴이다.
 
**2.사용 시점**

 - 객체들이 복잡한 구조(트리 등)의 모든 Element에 대해 작업을 수행해야 하는 경우 visitor pattern을 사용하면 좋다.
 - 또한 클래스 계층 구조에서 몇몇 단계에 있는 클래스에만 의미 있는 메서드가 존재할 때도 사용하면 좋다.
 - 방문자 패턴은 새로운 메서드를 기존 클래스에 새로 만들기보다는 visitor라는 별도의 클래스에 만들게 된다.
 - 이러한 메서드를 사용하는 객체는 visitir 객체의 메서드 중 하나를 선택해서 사용하게 된다.
 - 예) 알람을 보내는 클라이언트가 있다고 가정했을때, 알람의 종류로는 email, sms, push가 있다고 가정하자, 낮과 밤 모두 알람을
  전송하다 보니 사용자들이 화를 내기 시작 했다. 그래서 앞으로는 밤에는 push 알람만 보내기로 결정하게 되었다. 이러한 상황에서 
  클라이언트가 알람을 보낼 때 상황에 맞게 적절한 알람을 보내기 위해서 어떻게 해야 할까?
  Visitor Pattern을 사용하지 않는다면 시간에 따라 if문과 같은 조건문을 사용해서 알람을 보낼 방법을 찾고 해당 방법으로 알람을 전송해야 할 것 이다. 
  이렇게 만들게 되면 새로운 유형의 알람이 생기면 코드 전체를 수정해야 하는 불편함이 생긴다.
  하지만 Visitor Pattern을 사용하여 클라이언트가 직접 알람을 보낼 객체를 찾는 대신 Visitor 객체가 알람을 보내기에 적절한지를 알려주면 어떨까? 
  즉 Visitor 객체가 허용한 객체만 알람을 보내주도록 하는 것이다. 
  이렇게 하면 새로운 타입의 알람이 만들어지더라도 Visitor부분만 수정해주면 되기 때문에 클라이언트는 그냥 계속 동일하게 사용할 수 있게 된다. 
  
**3.장단점**

 **#장점**
  
   - Open / closed principle 을 준수한다. 클래스를 변경하지 않고도 다른 클래스의 객체에 사용할 수 있는 메서드를 만들 수 ㅇㅆ다.
   - single reponsibility principle 을 준수한다. 동일한 동작을 하는 여러 개의 메서드를 동일한 클래스에 만들 수 있더.
   - visitor 객체는 다양한 객체로 작업하는 동안 다양한 정보를 모을 수 있다.

 **#단점**
  
  - 클래스가 Element 계층 구조에 추가, 제거될 때마다 모든 visitor를 업데이트 해줘야 한다.
  - visitor 객체는 작업하는 Element의 private 프로퍼티 메서드에 접근 권한이 없을 수 있다.
  
**4.사용라이브러리**

 - 자바: FileVisitor, SimpleFileVisitor, AnnotationValueVisitor, ElementVisitor
 - 스프링: BeanDefinitionVisitor

